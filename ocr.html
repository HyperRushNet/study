<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OCR AI Demo</title>
</head>
<body>
<h2>OCR AI Demo</h2>
<input type="file" id="imageInput" accept="image/*"><br>
<button id="scanBtn">Scan Image</button>

<pre id="output"></pre>

<script src="https://hyperrushnet.github.io/study/js/ocr.js?v=1.163638"></script>

<script>
const imageInput = document.getElementById("imageInput");
const scanBtn = document.getElementById("scanBtn");
const output = document.getElementById("output");

function fileToBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => {
      // Verwijder line breaks voor compatibiliteit met image_url
      const base64 = reader.result.split(',')[1].replace(/\s+/g, '');
      resolve(base64);
    };
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

scanBtn.addEventListener("click", async () => {
  const file = imageInput.files[0];
  if (!file) return alert("Please upload an image.");
  output.textContent = "Processingâ€¦";

  try {
    const base64 = await fileToBase64(file);
    const result = await scanForText(base64);
    output.textContent = JSON.stringify(result, null, 2);
  } catch (err) {
    output.textContent = "Error: " + err;
  }
});
</script>
</body>
</html>
