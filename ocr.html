<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OCR AI Demo</title>
</head>
<body>
<h3>OCR AI Demo</h3>

<input type="file" id="imageInput" accept="image/*"><br>
<button id="sendButton">Scan Image</button>

<h4>Base64 OCR Output:</h4>
<pre id="output"></pre>

<script type="module">
import { scanForText } from "https://hyperrushnet.github.io/study/js/ocr.js?v=1.3";

const imageInput = document.getElementById("imageInput");
const sendButton = document.getElementById("sendButton");
const output = document.getElementById("output");

sendButton.addEventListener("click", async () => {
  const file = imageInput.files[0];
  if (!file) return alert("Please upload an image.");

  output.textContent = "Processingâ€¦";

  const base64Image = await fileToBase64(file);

  try {
    const result = await scanForText(base64Image);
    output.textContent = result.base64;
  } catch (err) {
    output.textContent = "Error: " + err;
  }
});

function fileToBase64(file){
  return new Promise((resolve, reject)=>{
    const reader = new FileReader();
    reader.onload = ()=>resolve(reader.result.split(',')[1]);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}
</script>
</body>
</html>
